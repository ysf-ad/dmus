!function(g){g.gfVideoBg=function(e,a){var d,r,s,u,h,l,c={},p=(this.settings={},g(e)),m=this,f=p.attr("data-video-source");this.init=function(){this.settings=g.extend({},c,a),u=p.parent().attr("data-id"),h=1-parseInt(p.attr("data-mute")?p.attr("data-mute"):"0"),l=parseInt(p.attr("data-sound-control")?p.attr("data-sound-control"):"0"),p.css({height:"auto"}),g(window).resize(function(){p.css("height","auto")}),p.removeClass("full-height");var e=m.getScreenType();if("auto"!=p.attr("data-height-"+e)&&""!=g.trim(p.attr("data-height-"+e))&&(e=g.trim(p.attr("data-height-"+e)),p.css({"min-height":e}),g(window).resize(function(){var e=m.getScreenType(),e=g.trim(p.attr("data-height-"+e));p.css({"min-height":e})})),p.find(".gf_video-bg-inner").html('<div id="'+u+'-player"></div>'),s=p.attr("data-image"),null!=f)switch(f){case"vimeo":var t="https://player.vimeo.com/api/player.js";(i=document.createElement("script")).src=t,(n=document.getElementsByTagName("script")[0]).parentNode.insertBefore(i,n),i.onload=function(){d=g.trim(p.attr("data-url-vimeo"));var a=p.children(".gf_video-bg-inner"),e=(a.empty().append('<div id="vimeo-wrapper-'+u+'"></div>'),a.find("#vimeo-wrapper-"+u).css({height:a.height()+"px",width:"100%",position:"relative"}),{url:d,loop:!0,autoplay:!0,autopause:!1,title:!1,muted:1==h,height:a.height()}),t=new Vimeo.Player("vimeo-wrapper-"+u,e);t.ready().then(function(){p.find(".gf_video-bg-inner").css("display","initial");var t=parseInt(p.find("#vimeo-wrapper-"+u+" iframe").attr("width"));function i(e){var t=p.find("#vimeo-wrapper-"+u).width(),i=0,t=(i=e<t?(t=t/e,a.height()*t):a.height(),(g(window).width()<992||/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent))&&(i+=50),i/a.height());return{height:i,width:e*t}}function n(e,t,i){var n,o;!i&&""==i||(n=(n=e.attr("style"))?n.split(";"):[],o=[],n.map(function(e){e.split(":")[0]!=t&&o.push(e)}),o.push(t+": "+i+" !important"),e.attr("style",o.join(";")))}var o=p.find("#vimeo-wrapper-"+u+" iframe"),e=i(t);n(o,"height",e.height+"px"),n(o,"width",e.width+"px"),g(window).off("resize.videobg").on("resize.videobg",function(){var e=i(t);n(o,"height",e.height+"px"),n(o,"width",e.width+"px")})}),p.on("pausevideo",function(){t.pause()}),p.on("playvideo",function(){t.play()}),p.on("mutevideo",function(){t.setVolume(0)}),p.on("unmutevideo",function(){t.setVolume(1)})};break;case"youtube":var i,n,t="https://www.youtube.com/iframe_api";(i=document.createElement("script")).src=t,0==g(document).find("script[src^='"+t+"']").length&&(n=document.getElementsByTagName("script")[0]).parentNode.insertBefore(i,n),d=g.trim(p.attr("data-url-youtube")),(r=-1!=d.indexOf("youtu.be/")?d.split("youtu.be/"):d.split(/watch\?v=/))&&null!=r[1]&&(r=r[1].split(/&/)[0]),setTimeout(function(){m.onYouTubeIframeAPIReady(),m.autoResize(),g(window).resize(function(){clearTimeout(window.resizedFinished),window.resizedFinished=setTimeout(function(){m.autoResize()},10)}),s&&(o.poster=s)},100);break;case"custom":d=g.trim(p.attr("data-url-custom"));t=p.children(".gf_video-bg-inner");t.html("<video "+(h?"muted":"")+' autoplay playsinline loop style="width: 100%;"><source src="'+d+'" type="video/mp4"></video>');var o=(o=t.find("video"))[0];p.on("pausevideo",function(){o.pause()}),p.on("playvideo",function(){o.play()}),p.on("mutevideo",function(){o.muted=!0}),p.on("unmutevideo",function(){o.muted=!1}),setTimeout(function(){m.autoResize(),g(window).resize(function(){clearTimeout(window.resizedFinished),window.resizedFinished=setTimeout(function(){m.autoResize()},10)}),s&&(o.poster=s)},100)}l&&this.showSoundControl()},this.onYouTubeIframeAPIReady=function(){new YT.Player(u+"-player",{videoId:r,playerVars:{autoplay:1,autohide:1,modestbranding:0,rel:0,showinfo:0,controls:0,disablekb:1,enablejsapi:0,iv_load_policy:3,hd:1,mute:h},events:{onReady:m.onPlayerReady,onStateChange:m.onPlayerStateChange}})},this.onPlayerReady=function(e){var t=e.target;t&&t.playVideo(),p.on("pausevideo",function(){t.pauseVideo()}),p.on("playvideo",function(){t.playVideo()}),p.on("mutevideo",function(){t.isMuted()||t.mute()}),p.on("unmutevideo",function(){t.isMuted()&&t.unMute()})},this.onPlayerStateChange=function(e){var t=e.target;e.data===YT.PlayerState.ENDED&&t&&t.playVideo()},this.autoResize=function(){var e=p.find(".gf_video-bg-inner"),t=p.height(),i=p.width();16*t/9<i?(e.css("height",9*i/16+"px"),e.css("width",i+"px")):(e.css("height",t+"px"),e.css("width",16*t/9+"px"))},this.getScreenType=function(){var e=g(window).width()+m.getScrollBarWidth();return _screenType=e<=767?"xs":e<=991?"sm":e<=1199?"md":"lg"},this.getScrollBarWidth=function(){var e=document.createElement("p"),t=(e.style.width="100%",e.style.height="200px",document.createElement("div")),i=(t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.visibility="hidden",t.style.width="200px",t.style.height="150px",t.style.overflow="hidden",t.appendChild(e),document.body.appendChild(t),e.offsetWidth),e=(t.style.overflow="scroll",e.offsetWidth);return i==e&&(e=t.clientWidth),document.body.removeChild(t),i-e},this.showSoundControl=function(){var e=p.children(".gf_videobg_soundcontrol"),t=e.children(".gf_videobg_mute"),i=e.children(".gf_videobg_unmute");(h?t:i).addClass("active"),t.off("click.gem").on("click.gem",function(){t.removeClass("active"),i.addClass("active"),p.trigger("unmutevideo")}),i.off("click.gem").on("click.gem",function(){i.removeClass("active"),t.addClass("active"),p.trigger("mutevideo")})},this.init()},g.fn.gfVideoBg=function(t){return this.each(function(){var e;null==g(this).data("gfvideobg")&&(e=new g.gfVideoBg(this,t),g(this).data("gfvideobg",e))})}}(window.GemQuery||jQuery);